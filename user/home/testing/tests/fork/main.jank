#include <jstring>;
#include <string>;
#include <iostream>;
#include <wait>;

i32 main() {

    cout << "RUNNING FORKTEST\n";
    cout.flush();
    for(i32 i = 0; i < 10; i++){
        pid_t pid = sys_fork();
        if(pid != $pid_t 0) {   //parent
            while(waitpid(pid, $i32* nullptr, WNOHANG) == $pid_t 0) {
                //continue
            }
            cout << "PARENT\n";
            cout.flush();
        }   
        else {      //child
            cout << "CHILD\n";
            cout.flush();
            return 0;
        }
    }
    cout << "DONE TEST\n";

    return 0;
}